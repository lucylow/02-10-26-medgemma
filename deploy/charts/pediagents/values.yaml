# values.yaml - PediScreen agents Helm chart (edit per cluster)
namespace: pediscreen

global:
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []   # e.g. - name: regcred
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "1000m"
      memory: "2Gi"

agents:
  orchestrator:
    enabled: true
    replicas: 2
    image:
      repository: ghcr.io/lucylow/pediscreen-orchestrator
      tag: "v0.1.0"
    port: 8080
    resources:
      requests:
        cpu: "300m"
        memory: "768Mi"
      limits:
        cpu: "1500m"
        memory: "3Gi"
    env: []
    # Example: - name: DATABASE_URL; valueFrom: { secretKeyRef: { name: pediscreen-db, key: DATABASE_URL } }
    nodeSelector: {}
    tolerations: []
    gpu:
      enabled: false
    hpa:
      enabled: true
      minReplicas: 2
      maxReplicas: 6
      targetCPUUtilizationPercentage: 60

  embedder:
    enabled: true
    replicas: 1
    image:
      repository: ghcr.io/lucylow/pediscreen-embedder
      tag: "v0.1.0"
    port: 8000
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "2000m"
        memory: "4Gi"
    env: []
    nodeSelector: {}
    tolerations: []
    gpu:
      enabled: false
      nvidia: false
      resourceName: nvidia.com/gpu
      count: 1
    hpa:
      enabled: false

  modelreasoner:
    enabled: true
    replicas: 0
    image:
      repository: ghcr.io/lucylow/pediscreen-modelreasoner
      tag: "v0.1.0"
    port: 8000
    resources:
      requests:
        cpu: "2000m"
        memory: "16Gi"
      limits:
        cpu: "4000m"
        memory: "64Gi"
    env: []
    nodeSelector:
      accelerator: nvidia-gpu
    tolerations:
      - key: "nvidia.com/gpu"
        operator: "Exists"
        effect: "NoSchedule"
    gpu:
      enabled: true
      nvidia: true
      resourceName: nvidia.com/gpu
      count: 1
    hpa:
      enabled: false

  audit:
    enabled: true
    replicas: 1
    image:
      repository: ghcr.io/lucylow/pediscreen-audit
      tag: "v0.1.0"
    port: 8080
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "1Gi"
    env: []
    nodeSelector: {}
    tolerations: []
    gpu:
      enabled: false
    hpa:
      enabled: false

  registry:
    enabled: true
    replicas: 1
    image:
      repository: ghcr.io/lucylow/pediscreen-registry
      tag: "v0.1.0"
    port: 8080
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "1Gi"
    env: []
    nodeSelector: {}
    tolerations: []
    gpu:
      enabled: false
    hpa:
      enabled: false

  ui:
    enabled: true
    replicas: 2
    image:
      repository: ghcr.io/lucylow/pediscreen-ui
      tag: "v0.1.0"
    port: 3000
    resources:
      requests:
        cpu: "100m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"
    env: []
    nodeSelector: {}
    tolerations: []
    gpu:
      enabled: false
    hpa:
      enabled: true
      minReplicas: 2
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70

ingress:
  enabled: true
  className: nginx
  hostname: pediscreen.example.org
  annotations: {}
  tls:
    enabled: false
    secretName: pediscreen-tls

prometheus:
  enabled: true
  serviceMonitor:
    enabled: true

rbac:
  create: true

serviceAccount:
  create: true

# Example only â€” use ExternalSecrets / Vault in production. Do NOT commit real secrets.
# Uncomment and set in a values override (e.g. values-dev.yaml) or via ExternalSecrets:
# secrets:
#   pediscreen-db:
#     DATABASE_URL: "postgresql://postgres:pass@postgres.pediscreen.svc.cluster.local:5432/pediscreen"
secrets: {}
